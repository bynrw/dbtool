# Oracle zu PostgreSQL Migrationstool

Dieses Java-Tool migriert komplette Oracle-Datenbanken zu PostgreSQL, indem es SQL-Skripte für alle Datenbankobjekte erzeugt.

## Funktionen

Das Tool migriert folgende Datenbankobjekte:
- **Tabellen** (Struktur und Daten)
- **Indizes** (einschließlich Unique-Indizes)
- **Sequenzen** (mit korrekten Start- und Increment-Werten)
- **Views** (mit automatischer SQL-Konvertierung)
- **Triggers** (Dokumentation für manuelle Anpassung)
- **Funktionen** (Dokumentation für manuelle Anpassung)
- **Prozeduren** (Dokumentation für manuelle Anpassung)
- **Synonyme** (als Views implementiert)
- **Constraints** (Primary Keys, Foreign Keys)

## Anforderungen

- Java 8 oder höher
- Oracle JDBC-Treiber (ojdbc8.jar)
- PostgreSQL JDBC-Treiber (postgresql.jar)

## Installation und Vorbereitung

1. Stellen Sie sicher, dass Java installiert ist
2. Laden Sie die JDBC-Treiber herunter und legen Sie sie im `lib`-Verzeichnis ab:
   - Oracle JDBC-Treiber: [Oracle JDBC Downloads](https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html)
   - PostgreSQL JDBC-Treiber: [PostgreSQL JDBC Downloads](https://jdbc.postgresql.org/download/)
3. Kompilieren Sie das Projekt:

```
javac -cp "lib/*" -d bin src/*.java
```

## Verwendung

1. Erstellen Sie eine Konfigurationsdatei nach dem Muster von `config_beispiel.properties`
2. Führen Sie das Tool aus:

```
java -cp "bin;lib/*" Main pfad/zur/konfigurationsdatei.properties
```

## Konfiguration

Die Konfiguration erfolgt über eine Properties-Datei mit folgenden Einstellungen:

### Datenbankverbindungen

```
oracle.url=jdbc:oracle:thin:@//localhost:1521/ORCLPDB
oracle.benutzer=user
oracle.passwort=password

postgres.url=jdbc:postgresql://localhost:5432/postgres
postgres.benutzer=postgres
postgres.passwort=postgres
```

### Tabellen-Konfiguration

```
# Tabellen für Migration (durch Kommas getrennt)
tabellen.whitelist=KUNDEN,BESTELLUNGEN,PRODUKTE

# Tabellen, die von der Migration ausgeschlossen werden sollen
tabellen.blacklist=TEMP_TABELLE,BACKUP_TABELLE

# Spalten, die pro Tabelle ignoriert werden sollen
tabelle.KUNDEN.ignorierte_spalten=LETZTE_AKTUALISIERUNG,INTERNE_ID
```

### Datentyp-Mappings und Transformationen

```
# Datentyp-Mappings (Oracle -> PostgreSQL)
datentyp.mapping=NUMBER(1)->BOOLEAN;VARCHAR2->VARCHAR;CLOB->TEXT

# Wertetransformationen für spezielle Typen
transform.NUMBER_1_=0->false;1->true
```

### Erweiterte Migrations-Optionen

```
# Konfiguration welche Objekte migriert werden sollen
migration.indizes=true
migration.sequenzen=true
migration.views=true
migration.triggers=false
migration.funktionen=false
migration.prozeduren=false
migration.synonyme=false
migration.constraints=true

# Namens-Mappings für PostgreSQL
schema.mapping=
index.prefix=idx_
sequence.suffix=_seq
constraint.prefix=
```

## Ausgabe

Das Tool erzeugt separate SQL-Dateien für jeden Objekttyp:

- `<tabelle>_create.sql` - Tabellendefinitionen
- `<tabelle>_inserts.sql` - Datenimport-Statements
- `indizes.sql` - Alle Indizes
- `sequenzen.sql` - Alle Sequenzen
- `views.sql` - Alle Views
- `triggers.sql` - Trigger-Dokumentation (manuell anzupassen)
- `funktionen.sql` - Funktions-Dokumentation (manuell anzupassen)
- `prozeduren.sql` - Prozedur-Dokumentation (manuell anzupassen)
- `synonyme.sql` - Synonyme als Views implementiert

## Hinweise zur Migration

### Automatisch konvertiert:
- Tabellen und Daten
- Indizes und Constraints
- Sequenzen mit korrekten Werten
- Views (grundlegende SQL-Konvertierung)

### Manuelle Anpassung erforderlich:
- **Triggers**: Oracle PL/SQL → PostgreSQL PL/pgSQL
- **Funktionen**: Oracle PL/SQL → PostgreSQL PL/pgSQL  
- **Prozeduren**: Oracle PL/SQL → PostgreSQL PL/pgSQL
- **Komplexe Views**: Spezielle Oracle-Funktionen

### SQL-Konvertierungen (automatisch):
- `NVL()` → `COALESCE()`
- `SYSDATE` → `CURRENT_TIMESTAMP`
- `ROWNUM` → `ROW_NUMBER() OVER()`
- Oracle-Datentypen → PostgreSQL-Datentypen
